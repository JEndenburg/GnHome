<html>
    <head>
        <script src="./Main.js"></script>
    </head>
    <body>
        <div id="elm-app"></div>
        <script>
            const app = Elm.Widgets.Weather.Main.init({
                node: document.getElementById("elm-app")
            });

            app.ports.requestGeolocation.subscribe(() => {
                navigator.geolocation.getCurrentPosition(sendGeolocation);
            });

            function sendGeolocation(location)
            {
                app.ports.receiveGeolocation.send(
                    {
                        longitude: location.coords.longitude,
                        latitude: location.coords.latitude,
                    }
                );
            }

            // const weather = document.getElementById("weather");
            // const weatherImage = document.getElementById("weather-img");
            // const degrees = document.getElementById("degrees");

            // function fetchWeather()
            // {
            //     navigator.geolocation.getCurrentPosition(fetchWeatherFromLocation);
            // }

            // function fetchWeatherFromLocation(location)
            // {
            //     const latitude = location.coords.latitude;
            //     const longitude = location.coords.longitude;
            //     fetch(`http://weerlive.nl/api/json-data-10min.php?key=4096407fcf&locatie=${latitude},${longitude}`)
            //         .then(resp => resp.json())
            //         .then(json => updateWeather(json));
            // }

            // function updateWeather(json)
            // {
            //     const weatherData = json.liveweer[0]; //https://weerlive.nl/delen.php

            //     weatherImage.src = `./img/icons/${weatherData.image}.png`;
            //     degrees.innerText = weatherData.temp;

            //     //weather.innerText = `The weather for ${weatherData.plaats} is ${weatherData.image} at ${weatherData.temp} degrees celsius.`;
            // }

            // if(navigator.geolocation)
            // {
            //     setInterval(fetchWeather, 1800000);
            //     fetchWeather();
            // }
            // else
            // {
            //     weather.innerText = "Your browser does not support geolocation.";
            // }

        </script>
    </body>
</html>